"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[562],{4562:(J,c,a)=>{a.r(c),a.d(c,{AuthModule:()=>G});var f=a(2074),n=a(6284),p=a(1300),l=a(89),s=a(6502),r=a(4355),d=a(7881),h=a(5136),T=a(447),v=a(3568),I=a(3787);function Z(t){return(0,v.K)(e=>function E(t){return t instanceof T.g}(e)?t(e):(0,I._)(()=>e))}var m=(()=>((m=m||{}).minPasswordLength=8,m))(),A=a(4121),y=a(8168),C=a(9018),u=a(2369);function w(t,e){1&t&&(r.TgZ(0,"mat-error",6),r._uU(1,"Must have an email format"),r.qZA())}function M(t,e){1&t&&(r.TgZ(0,"mat-error",6),r._uU(1,"Password is too short"),r.qZA())}function _(t,e){if(1&t&&(r.TgZ(0,"mat-error",6),r._uU(1),r.qZA()),2&t){const o=e.ngIf;r.xp6(1),r.Oqu(o)}}let N=(()=>{class t{constructor(){this.authService=(0,r.f3M)(h.e),this.router=(0,r.f3M)(s.F0),this.formBuilder=(0,r.f3M)(n.j3),this.destroyRef=(0,r.f3M)(r.ktI),this.loginError$=new A.X(null),this.formGroup=this.formBuilder.group({email:["",[n.kI.required,n.kI.email]],password:["",[n.kI.required,n.kI.minLength(m.minPasswordLength)]]})}handleSubmit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const o=this.formGroup.getRawValue();this.authService.login({email:o.email,password:o.password}).pipe((0,y.b)(()=>this.router.navigate([""])),Z(i=>this.catchLoginError(i)),(0,d.sL)(this.destroyRef)).subscribe()}catchLoginError(o){const i=o.errorMessages.join(" ");return this.loginError$.next(i),C.E}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-login"]],decls:17,vars:6,consts:[[1,"login-form",3,"formGroup","ngSubmit"],["type","email","matInput","","formControlName","email"],["class","login-form__error",4,"ngIf"],["type","password","matInput","","formControlName","password"],["type","submit","mat-button",""],["routerLink","/auth/registration",1,"login-form__registration-link"],[1,"login-form__error"]],template:function(o,i){1&o&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return i.handleSubmit()}),r.TgZ(1,"mat-form-field")(2,"mat-label"),r._uU(3,"Email"),r.qZA(),r._UZ(4,"input",1),r.YNc(5,w,2,0,"mat-error",2),r.qZA(),r.TgZ(6,"mat-form-field")(7,"mat-label"),r._uU(8,"Password"),r.qZA(),r._UZ(9,"input",3),r.YNc(10,M,2,0,"mat-error",2),r.qZA(),r.YNc(11,_,2,1,"mat-error",2),r.ALo(12,"async"),r.TgZ(13,"button",4),r._uU(14,"Sign in"),r.qZA(),r.TgZ(15,"a",5),r._uU(16,"Sign up"),r.qZA()()),2&o&&(r.Q6J("formGroup",i.formGroup),r.xp6(5),r.Q6J("ngIf",i.formGroup.controls.email.hasError("email")),r.xp6(5),r.Q6J("ngIf",i.formGroup.controls.password.hasError("minlength")),r.xp6(1),r.Q6J("ngIf",r.lcZ(12,4,i.loginError$)))},dependencies:[f.Nt,u.KE,u.hX,u.TO,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,p.lW,l.O5,s.rH,l.Ov],styles:["[_nghost-%COMP%]{display:flex;justify-content:center}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:10px}.login-form__error[_ngcontent-%COMP%]{text-align:justify}.login-form__registration-link[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),t})();var g;function U(t,e){1&t&&(r.TgZ(0,"mat-error",9),r._uU(1,"Must have an email format"),r.qZA())}function x(t,e){1&t&&(r.TgZ(0,"mat-error",9),r._uU(1,"Password is too short"),r.qZA())}function L(t,e){if(1&t&&(r.TgZ(0,"mat-error",9),r._uU(1),r.qZA()),2&t){const o=r.oxw();r.xp6(1),r.Oqu(o.formGroup.controls.retypePassword.getError("retype"))}}function P(t,e){if(1&t&&(r.TgZ(0,"mat-error",9),r._uU(1),r.qZA()),2&t){const o=e.ngIf;r.xp6(1),r.Oqu(o)}}(g||(g={})).retypePassword=function e(o){return i=>i.value===o.value?null:{...i.errors,retype:"Passwords do not match."}};const R=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:N},{path:"registration",component:(()=>{class t{constructor(){this.authService=(0,r.f3M)(h.e),this.router=(0,r.f3M)(s.F0),this.formBuilder=(0,r.f3M)(n.j3),this.destroyRef=(0,r.f3M)(r.ktI),this.registrationError$=new A.X(null);const o=this.formBuilder.control("",[n.kI.required,n.kI.minLength(m.minPasswordLength)]);this.formGroup=this.formBuilder.group({firstName:["",[n.kI.required]],lastName:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],password:o,retypePassword:["",[n.kI.required,g.retypePassword(o)]]})}handleSubmit(){if(this.formGroup.markAllAsTouched(),this.formGroup.invalid)return;const o=this.formGroup.getRawValue();this.authService.register({firstName:o.firstName,lastName:o.lastName,email:o.email,password:o.password}).pipe((0,y.b)(()=>this.router.navigate([""])),Z(i=>this.catchRegistrationError(i)),(0,d.sL)(this.destroyRef)).subscribe()}catchRegistrationError(o){const i=o.errorMessages.join(" ");return this.registrationError$.next(i),C.E}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-registration"]],decls:30,vars:7,consts:[[1,"registration-form",3,"formGroup","ngSubmit"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["type","email","matInput","","formControlName","email"],["class","registration-form__error",4,"ngIf"],["type","password","matInput","","formControlName","password"],["type","password","matInput","","formControlName","retypePassword"],["type","submit","mat-button",""],["routerLink","/auth/login",1,"registration-form__login-link"],[1,"registration-form__error"]],template:function(o,i){1&o&&(r.TgZ(0,"form",0),r.NdJ("ngSubmit",function(){return i.handleSubmit()}),r.TgZ(1,"mat-form-field")(2,"mat-label"),r._uU(3,"First name"),r.qZA(),r._UZ(4,"input",1),r.qZA(),r.TgZ(5,"mat-form-field")(6,"mat-label"),r._uU(7,"Last name"),r.qZA(),r._UZ(8,"input",2),r.qZA(),r.TgZ(9,"mat-form-field")(10,"mat-label"),r._uU(11,"Email"),r.qZA(),r._UZ(12,"input",3),r.YNc(13,U,2,0,"mat-error",4),r.qZA(),r.TgZ(14,"mat-form-field")(15,"mat-label"),r._uU(16,"Password"),r.qZA(),r._UZ(17,"input",5),r.YNc(18,x,2,0,"mat-error",4),r.qZA(),r.TgZ(19,"mat-form-field")(20,"mat-label"),r._uU(21,"Re-type passoword"),r.qZA(),r._UZ(22,"input",6),r.YNc(23,L,2,1,"mat-error",4),r.qZA(),r.YNc(24,P,2,1,"mat-error",4),r.ALo(25,"async"),r.TgZ(26,"button",7),r._uU(27,"Sign up"),r.qZA(),r.TgZ(28,"a",8),r._uU(29,"Sign in"),r.qZA()()),2&o&&(r.Q6J("formGroup",i.formGroup),r.xp6(13),r.Q6J("ngIf",i.formGroup.controls.email.hasError("email")),r.xp6(5),r.Q6J("ngIf",i.formGroup.controls.password.hasError("minlength")),r.xp6(5),r.Q6J("ngIf",i.formGroup.controls.retypePassword.hasError("retype")),r.xp6(1),r.Q6J("ngIf",r.lcZ(25,5,i.registrationError$)))},dependencies:[f.Nt,u.KE,u.hX,u.TO,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,p.lW,l.O5,s.rH,l.Ov],styles:["[_nghost-%COMP%]{display:flex;justify-content:center}.registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:10px}.registration-form__error[_ngcontent-%COMP%]{text-align:justify}.registration-form__login-link[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),t})()},{path:"**",redirectTo:"login"}];let S=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[s.Bz.forChild(R),s.Bz]}),t})(),G=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[f.c,n.UX,p.ot,l.ez,s.Bz,S]}),t})()}}]);