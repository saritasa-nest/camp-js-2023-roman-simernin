"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[527],{5527:(G,c,a)=>{a.r(c),a.d(c,{AuthModule:()=>P});var l=a(2074),e=a(6284),f=a(1300),p=a(89),s=a(6502),t=a(4355),d=a(7881),h=a(5136),Z=a(6622),m=(()=>((m=m||{}).minPasswordLength=8,m))(),_=a(8168),y=a(4945),u=a(2369);function C(r,i){1&r&&(t.TgZ(0,"mat-error",8),t._uU(1),t.qZA()),2&r&&(t.xp6(1),t.Oqu("Must have an email format"))}function A(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r&&(t.xp6(1),t.hij("","Password is too short"," "))}function x(r,i){if(1&r&&(t.TgZ(0,"mat-error",8),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Oqu(o.formGroup.getError("login"))}}let T=(()=>{class r{constructor(){this.authService=(0,t.f3M)(h.e),this.router=(0,t.f3M)(s.F0),this.formBuilder=(0,t.f3M)(e.j3),this.destroyRef=(0,t.f3M)(t.ktI),this.formGroup=this.formBuilder.group({email:["",[e.kI.required,e.kI.email]],password:["",[e.kI.required,e.kI.minLength(m.minPasswordLength)]]})}handleSubmit(){if(this.formGroup.invalid)return;const o=this.formGroup.getRawValue();this.authService.login({email:o.email,password:o.password}).pipe((0,_.b)(()=>this.router.navigate([""])),(0,Z.V)(n=>(0,y.of)(this.catchLoginError(n))),(0,d.sL)(this.destroyRef)).subscribe()}catchLoginError(o){this.formGroup.setErrors({login:o.errorMessages.join(" ")})}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["login"]],decls:17,vars:4,consts:[[1,"login"],[1,"login__form",3,"formGroup","ngSubmit"],["matInput","","formControlName","email"],["class","login__form-error",4,"ngIf"],["type","password","matInput","","formControlName","password"],[4,"ngIf"],["type","submit","mat-button",""],["routerLink","/auth/registration",1,"login__registration-link"],[1,"login__form-error"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.handleSubmit()}),t.TgZ(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Email"),t.qZA(),t._UZ(5,"input",2),t.YNc(6,C,2,1,"mat-error",3),t.qZA(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",4),t.YNc(11,A,2,1,"mat-error",5),t.qZA(),t.TgZ(12,"button",6),t._uU(13,"Sign in"),t.qZA(),t.YNc(14,x,2,1,"mat-error",3),t.TgZ(15,"a",7),t._uU(16,"Sign up"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(5),t.Q6J("ngIf",n.formGroup.controls.email.hasError("email")),t.xp6(5),t.Q6J("ngIf",n.formGroup.controls.password.hasError("minlength")),t.xp6(3),t.Q6J("ngIf",n.formGroup.hasError("login")))},dependencies:[l.Nt,u.KE,u.hX,u.TO,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,f.lW,p.O5,s.rH],styles:[".login[_ngcontent-%COMP%]{display:flex;justify-content:center}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:10px}.login__form-error[_ngcontent-%COMP%]{text-align:justify}.login__registration-link[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),r})();var g;function w(r,i){1&r&&(t.TgZ(0,"mat-error",11),t._uU(1),t.qZA()),2&r&&(t.xp6(1),t.Oqu("Must have an email format"))}function v(r,i){1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r&&(t.xp6(1),t.hij("","Password is too short"," "))}function I(r,i){if(1&r&&(t.TgZ(0,"mat-error",11),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Oqu(o.formGroup.controls.retypePassword.getError("retype"))}}function M(r,i){if(1&r&&(t.TgZ(0,"mat-error",11),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Oqu(o.formGroup.getError("registration"))}}(g||(g={})).retypePassword=function i(o){return n=>n.value===o.value?null:{...n.errors,retype:"Passwords do not match."}};const N=[{path:"",redirectTo:"/auth/login",pathMatch:"full"},{path:"login",component:T},{path:"registration",component:(()=>{class r{constructor(){this.authService=(0,t.f3M)(h.e),this.router=(0,t.f3M)(s.F0),this.formBuilder=(0,t.f3M)(e.j3),this.destroyRef=(0,t.f3M)(t.ktI);const o=this.formBuilder.control("",[e.kI.required,e.kI.minLength(m.minPasswordLength)]);this.formGroup=this.formBuilder.group({firstName:["",[e.kI.required]],lastName:["",[e.kI.required]],email:["",[e.kI.required,e.kI.email]],password:o,retypePassword:["",[e.kI.required,g.retypePassword(o)]]})}handleSubmit(){if(this.formGroup.invalid)return;const o=this.formGroup.getRawValue();this.authService.register({firstName:o.firstName,lastName:o.lastName,email:o.email,password:o.password,retypePassword:o.retypePassword}).pipe((0,_.b)(()=>this.router.navigate([""])),(0,Z.V)(n=>(0,y.of)(this.catchRegistrationError(n))),(0,d.sL)(this.destroyRef)).subscribe()}catchRegistrationError(o){this.formGroup.setErrors({registration:o.errorMessages.join(" ")})}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["registration"]],decls:30,vars:5,consts:[[1,"registration"],[1,"registration__form",3,"formGroup","ngSubmit"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","email"],["class","registration__form-error",4,"ngIf"],["type","password","matInput","","formControlName","password"],[4,"ngIf"],["type","password","matInput","","formControlName","retypePassword"],["type","submit","mat-button",""],["routerLink","/login",1,"registration__login-link"],[1,"registration__form-error"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return n.handleSubmit()}),t.TgZ(2,"mat-form-field")(3,"mat-label"),t._uU(4,"First name"),t.qZA(),t._UZ(5,"input",2),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Last name"),t.qZA(),t._UZ(9,"input",3),t.qZA(),t.TgZ(10,"mat-form-field")(11,"mat-label"),t._uU(12,"Email"),t.qZA(),t._UZ(13,"input",4),t.YNc(14,w,2,1,"mat-error",5),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Password"),t.qZA(),t._UZ(18,"input",6),t.YNc(19,v,2,1,"mat-error",7),t.qZA(),t.TgZ(20,"mat-form-field")(21,"mat-label"),t._uU(22,"Re-type passoword"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,I,2,1,"mat-error",5),t.qZA(),t.TgZ(25,"button",9),t._uU(26,"Sign up"),t.qZA(),t.YNc(27,M,2,1,"mat-error",5),t.TgZ(28,"a",10),t._uU(29,"Sign in"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",n.formGroup),t.xp6(13),t.Q6J("ngIf",n.formGroup.controls.email.hasError("email")),t.xp6(5),t.Q6J("ngIf",n.formGroup.controls.password.hasError("minlength")),t.xp6(5),t.Q6J("ngIf",n.formGroup.controls.retypePassword.hasError("retype")),t.xp6(3),t.Q6J("ngIf",n.formGroup.hasError("registration")))},dependencies:[l.Nt,u.KE,u.hX,u.TO,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,f.lW,p.O5,s.rH],styles:[".registration[_ngcontent-%COMP%]{display:flex;justify-content:center}.registration__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px;gap:10px}.registration__form-error[_ngcontent-%COMP%]{text-align:justify}.registration__login-link[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),r})()}];let U=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[s.Bz.forChild(N),s.Bz]}),r})(),P=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.c,e.UX,f.ot,p.ez,s.Bz,U]}),r})()}}]);