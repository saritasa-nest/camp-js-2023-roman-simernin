<div>
  <h1 class="anime-dashboard-title">Anime dashboard</h1>
  <div>
    <form>
      <mat-form-field>
        <mat-label>Search</mat-label>
        <input matInput [formControl]="searchFormControl">
      </mat-form-field>
      <mat-form-field>
        <mat-label>Types</mat-label>
        <mat-select [formControl]="animeTypesFormControl" multiple>
          <mat-option *ngFor="let animeType of animeTypes" [value]="animeType">{{animeType}}</mat-option>
        </mat-select>
      </mat-form-field>
    </form>
  </div>
  <main class="anime-table-container">
    <ng-container *ngIf="paginatedAnime$ | async as paginatedAnime">
      <table mat-table  [dataSource]="paginatedAnime.results" matSort (matSortChange)="handleSortingChange($event)">

        <caption class="anime-table-caption">Anime table</caption>
  
        <ng-container matColumnDef="imageUrl" class="anime-table-column">
          <th mat-header-cell *matHeaderCellDef class="anime-table-header">Image</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            <img src="{{ animePreview.imageUrl }}" class="anime-table-cell__image"
              alt="{{ animePreview.englishTitle }}" />
          </td>
        </ng-container>
  
        <ng-container matColumnDef="englishTitle">
          <th mat-header-cell *matHeaderCellDef mat-sort-header="englishTitle">Title (English)</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            {{ (animePreview.englishTitle | titlecase) || 'No' }}
          </td>
        </ng-container>
  
        <ng-container matColumnDef="japaneseTitle">
          <th mat-header-cell *matHeaderCellDef class="anime-table-header">Title (Japanese)</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            {{ (animePreview.japaneseTitle | titlecase) || 'No' }}
          </td>
        </ng-container>
  
        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef class="anime-table-header">Type</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            {{ animePreview.type | titlecase }}
          </td>
        </ng-container>
  
        <ng-container matColumnDef="airedStartDate">
          <th mat-header-cell *matHeaderCellDef class="anime-table-header" mat-sort-header="airedStartDate">Aired Start date</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            {{ animePreview.airedStartDate | date }}
          </td>
        </ng-container>
  
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef class="anime-table-header" mat-sort-header="status">Status</th>
          <td mat-cell *matCellDef="let animePreview" class="anime-table-cell">
            {{ animePreview.status | titlecase }}
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedAnimeTableColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedAnimeTableColumns;"></tr>
  
      </table>
  
      <mat-paginator
        [length]="paginatedAnime.totalCount"
        [pageSize]="defaultPageSize"
        [pageSizeOptions]="availablePageSizes"
        (page)="handlePaginationParametersChange(($event))">
      </mat-paginator>
  
    </ng-container>
  </main>
</div>